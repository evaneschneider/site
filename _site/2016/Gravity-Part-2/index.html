<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Evan's research blog - Gravity (Part 2)</title>
  <link rel="shortcut icon" href="http://evaneschneider.github.io/site/assets/images/favicon.ico">
  <link rel="stylesheet" href="http://evaneschneider.github.io/site/assets/css/style.css">
  <link rel="alternate" type="application/rss+xml" title="My Blog" href="http://evaneschneider.github.io/site/rss.xml">
  <link rel="stylesheet" href="http://evaneschneider.github.io/site/assets/css/highlight.css">
</head>
<body>

  <nav class="main-nav">
    
        <a href="http://evaneschneider.github.io/site/"> <span class="arrow">←</span> Home </a>
    

    
        
            <a href="http://evaneschneider.github.io/site/about">About </a>
        
    
    <a class="cta" href="http://evaneschneider.github.io/site/feed.xml">Subscribe</a>
</nav>

  

  <section id="wrapper" class="">
    <article class="post">
    <header>
        <h1>Gravity (Part 2)</h1>
        <h2 class="headline">December 14, 2016</h2>
    </header>
    <section id="post-body">
        <p>In addition to the operator-split source term update I added last week,</p>

<div style="text-align: center">
$$(\rho v)^{n+1}_{i} = (\rho v)^{n}_{i} + \frac{\Delta t}{2} g (\rho^{n}_{i} + \rho^{n+1}_{i}),$$

$$(\rho E)^{n+1}_{i} = (\rho E)^{n}_{i} + \frac{\Delta t}{4} g (\rho^{n}_{i} + \rho^{n+1}_{i})(v^{n}_{i} + v^{n+1}_{i}),$$
</div>

<p>I’ve now tried correcting the velocities and total energy before the input
states are passed to the Riemann solver. The correction takes the same
form as the source terms, so for example, the correction to the left states
would be:</p>

<div style="text-align: center">
$$(\rho_L v_{x_L}) += \Delta t \rho_{L} g_{x}$$

$$(\rho_L v_{y_L}) += \Delta t \rho_{L} g_{y}$$

$$(\rho_L v_{z_L}) += \Delta t \rho_{L} g_{z}$$

$$(\rho_L E_{L}) += \Delta t \rho_{L} (v_{x, L} g_x + v_{y, L} g_y + v_{z, L} g_z),$$
</div>

<p>where <script type="math/tex">g_x</script>, <script type="math/tex">g_y</script>, and <script type="math/tex">g_z</script> are the three components of the gravitational
acceleration.</p>

<p>I’ve tested the two versions (the original update versus
the corrected input states) using the same Rayleigh-Taylor initial
conditions as last week’s post, but without the velocity perturbation.
Because the fluid is in hydrostatic equilibrium to start, the fluctuations
in the rms y-velocities seem like a decent measure of how well the code
is doing. I found (somewhat surprisingly) that there is virtually no 
difference between the two methods. The plot below shows the rms velocities
for the original version - the corrected version looks exactly the same. 
All tests so far have been run using PPMC, an exact Riemann solver, and CTU.</p>

<div style="text-align: center">
<img src="http://localhost:4000assets/images/rms_velocities.png" />
</div>


    </section>
</article>
<footer id="post-meta" class="clearfix">
    <a href="http://twitter.com/navelation">
        <img class="avatar" src="http://evaneschneider.github.io/site/assets/images/avatar.png">
        <div>
            <span class="dark">Evan Schneider</span>
            <span>Blogging about stuff</span>
        </div>
    </a>

    <section id="sharing">
        <a class="twitter" href="https://twitter.com/intent/tweet?text=/2016/Gravity-Part-2/ - Gravity (Part 2) by @navelation"><span class="icon-twitter"> Tweet</span></a>

<a class="facebook" href="#" onclick="
    window.open(
      'https://www.facebook.com/sharer/sharer.php?u='+encodeURIComponent(location.href),
      'facebook-share-dialog',
      'width=626,height=436');
    return false;"><span class="icon-facebook-rect"> Share</span>
</a>
    </section>
</footer>

<!-- Disqus comments -->


<!-- Archive post list -->




  </section>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script src="http://evaneschneider.github.io/site/assets/js/main.js"></script>
  <script src="http://evaneschneider.github.io/site/assets/js/highlight.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-XXXXXXXX-X', 'auto');
    ga('send', 'pageview');
  </script>
  <!-- Include mathjax support -->
  <script type="text/javascript"
    src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>

</body>
</html>



